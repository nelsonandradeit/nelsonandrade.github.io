(function(a){"use strict";a.HSCore.components.HSPopup={_baseConfig:{baseClass:"u-fancybox-theme",slideClass:"u-fancybox-slide",speed:1e3,slideSpeedCoefficient:1,infobar:false,slideShow:false,fullScreen:true,thumbs:false,closeBtn:true,baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1">'+'<div class="fancybox-bg"></div>'+'<div class="fancybox-controls">'+'<div class="fancybox-infobar">'+'<div class="fancybox-infobar__body">'+'<span class="js-fancybox-index"></span>&nbsp;/&nbsp;<span class="js-fancybox-count"></span>'+"</div>"+"</div>"+'<div class="fancybox-buttons">'+'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="Close (Esc)"></button>'+"</div>"+"</div>"+'<div class="fancybox-slider-wrap">'+'<button data-fancybox-previous class="fancybox-button fancybox-button--left" title="Previous"></button>'+'<button data-fancybox-next class="fancybox-button fancybox-button--right" title="Next"></button>'+'<div class="fancybox-slider"></div>'+"</div>"+'<div class="fancybox-caption-wrap"><div class="fancybox-caption"></div></div>'+"</div>",onInit:a.noop,beforeMove:a.noop,beforeClose:a.noop},init:function(n,e){if(!n)return;var t,o=a(n);if(!o.length)return;e=e&&a.isPlainObject(e)?a.extend(true,{},this._baseConfig,e):this._baseConfig;e=this._predefineCallbacks(e);this.$body=a("body");this.initGallery(n,e)},initGallery:function(n,e){a("body").on("click.HSPopup",n,function(n){var t=a(this),o=0,i,s=[],c;if(t.data("fancybox-gallery")){i=a('[data-fancybox-gallery="'+t.data("fancybox-gallery")+'"]')}else if(t.data("fancybox-hidden-gallery")){i=a('[data-fancybox-hidden-gallery="'+t.data("fancybox-hidden-gallery")+'"]')}if(i&&i.length){o=i.index(t);i.each(function(n,e){var t=a(e);c={src:t.attr(e.nodeName==="IMG"||e.nodeName==="IFRAME"?"src":"href"),customOpts:{fancyboxAnimateIn:t.data("fancybox-animate-in"),fancyboxAnimateOut:t.data("fancybox-animate-out"),fancyboxSpeed:t.data("fancybox-speed"),fancyboxSlideSpeed:t.data("fancybox-slide-speed"),fancyboxBlurBg:t.data("fancybox-blur-bg"),fancyboxBg:t.data("fancybox-bg")}};if(t.data("fancybox-type")){c.type=t.data("fancybox-type");console.log(t)}s.push(c)});console.log(s)}else{c={src:t.attr("href"),customOpts:{fancyboxAnimateIn:t.data("fancybox-animate-in"),fancyboxAnimateOut:t.data("fancybox-animate-out"),fancyboxSpeed:t.data("fancybox-speed"),fancyboxSlideSpeed:t.data("fancybox-slide-speed"),fancyboxBlurBg:t.data("fancybox-blur-bg"),fancyboxBg:t.data("fancybox-bg")}};if(t.data("fancybox-type")){c.type=t.data("fancybox-type")}s=[c]}a.fancybox.open(s,s[o].customOpts.fancyboxSpeed?a.extend(true,{},e,{speed:s[o].customOpts.fancyboxSpeed}):e,o);n.preventDefault()})},_predefineCallbacks:function(n){var e=this,t=n.onInit,o=n.beforeMove,i=n.beforeClose;n.onInit=function(n){e._defaultBgColor=n.$refs.bg.css("background-color");if(n.group.length>1){n.$refs.container.find(".fancybox-button--left, .fancybox-button--right").show()}if(a.isFunction(t))t.call(this,n)};n.beforeMove=function(a,n){if(e._currentSlide){e._closeSlide(e._currentSlide,a)}setTimeout(function(){e._openSlide(n,a)},0);e._currentSlide=n;o.call(this,a,n)};n.beforeClose=function(a,n){setTimeout(function(){e._closeSlide(n,a)},0);i.call(this,a,n)};return n},_closeSlide:function(n,e){var t=a(n.$image),o=n.customOpts?n.customOpts:n.opts.$orig.data(),i=e.group.length;this._blurBg(false);if(o.fancyboxAnimateOut){if(t.hasClass(o.fancyboxAnimateIn))t.removeClass(o.fancyboxAnimateIn);t.addClass(o.fancyboxAnimateOut)}},_openSlide:function(n,e){var t=a(n.$image),o=n.customOpts?n.customOpts:n.opts.$orig.data();e.$refs.bg.css("background-color",o.fancyboxBg?o.fancyboxBg:this._defaultBgColor);this._blurBg(o.fancyboxBlurBg?true:false);t.css("animation-duration",(o.fancyboxSlideSpeed&&o.fancyboxSlideSpeed>=n.opts.speed?o.fancyboxSlideSpeed:n.opts.speed*Math.abs(n.opts.slideSpeedCoefficient))+"ms");if(o.fancyboxAnimateIn){if(t.hasClass(o.fancyboxAnimateOut))t.removeClass(o.fancyboxAnimateOut);t.addClass("animated "+o.fancyboxAnimateIn)}},_blurBg:function(n){var e=this;if(n){if(this._blurBgTimeOut)clearTimeout(this._blurBgTimeOut);if(!this.blurBgContainer){this.blurBgContainer=a("<div></div>",{class:"u-fancybox-blur-bg-container"});this.$body.append(this.blurBgContainer)}if(this.blurBgContainer.children().length)return;this.blurBgContainer.append(this.$body.children().not(".fancybox-container"))}else{if(!this.blurBgContainer||!this.blurBgContainer.children().length)return;this._blurBgTimeOut=setTimeout(function(){e.$body.append(e.blurBgContainer.children())},10)}}}})(jQuery);