(function(){"use strict";BX.addCustomEvent("BX.Landing.Block:init",function(a){var i=a.block.querySelector(a.makeRelativeSelector(".js-gallery-cards"));if(i!==null){window["landingGalleresCards"+a.block.id]=new t(i,a.block);window["landingGalleresCards"+a.block.id].initImages()}});BX.addCustomEvent("BX.Landing.Block:Node:update",function(t){if(typeof window["landingGalleresCards"+t.block.id]!="undefined"){var a=t.block.querySelector(t.makeRelativeSelector(".js-gallery-cards"));if(a!==null&&a.contains(t.node)){window["landingGalleresCards"+t.block.id].reinitImage(t.node)}}});var t=function(t,a){this.block=a;this.gallery=t;this.uniqId=Math.random().toString(16).substr(2,8)};t.prototype={dataFancybox:"data-fancybox",dataFancyboxInitied:"data-fancybox-initied",dataFancyboxTitle:"data-caption",addOuterLink:function(t){var a=t.getAttribute("src");if(a!=null){var i=BX.findParent(t);var e=BX.findChild(i,{},false,true);var e=Object.keys(e).map(function(t){return e[t]});var n={attrs:{href:a},children:e};n.attrs[this.dataFancybox]=BX.data(t,this.dataFancybox.replace("data-",""))+"_"+this.uniqId;var r=t.getAttribute("alt");if(r!=null){n.attrs[this.dataFancyboxTitle]=r}var d={attrs:{}};d.attrs[this.dataFancybox]="";d.attrs[this.dataFancyboxInitied]="Y";BX.adjust(t,d);BX.adjust(i,{children:[BX.create("a",n)]})}},initImages:function(){var t=BX.findChild(this.gallery,{attribute:this.dataFancybox},true,true);t.forEach(BX.delegate(function(t){if(!this.isImageInitied(t)){this.addOuterLink(t)}},this))},reinitImage:function(t){if(this.isImageInitied(t)){var a=t.getAttribute("src");if(a!=null){var i=BX.findParent(t,{tag:"a",attribute:[this.dataFancybox]});if(i!==null){var e={attrs:{href:a}};var n=t.getAttribute("alt");if(n!=null){e.attrs[this.dataFancyboxTitle]=n}BX.adjust(i,e)}}}},isImageInitied:function(t){return t.tagName=="IMG"&&BX.data(t,this.dataFancyboxInitied.replace("data-",""))=="Y"||t.tagName=="A"&&t.firstChild!=null&&this.isImageInitied(t.firstChild)}}})();